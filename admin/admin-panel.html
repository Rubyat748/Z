
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ZTA Admin Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<style>
body {
    background: #000;
    color: #0f0;
    font-family: "Courier New", monospace;
}
.box {
    border: 2px solid #0f0;
    border-radius: 12px;
    background: #050505;
}
.btn {
    border: 1px solid #00ff88;
    padding: 6px 10px;
    border-radius: 6px;
    transition: 0.2s;
}
.btn:hover {
    background: #00ff88;
    color: black;
}
</style>
</head>

<body class="p-6">

<h1 class="text-3xl font-bold text-green-400 mb-6">ZTA ADMIN PANEL</h1>


<!-- USER LIST -->
<div class="box p-4">

    <h2 class="text-xl text-green-300 mb-3">ðŸ‘¤ User Management</h2>

    <!-- Search -->
    <input id="searchUser"
        class="w-full mb-4 bg-transparent border border-green-600 p-2 rounded text-green-300"
        placeholder="Search username or email">

    <div id="userList" class="space-y-4"></div>

</div>



<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

<!-- your firebase config file -->
<script src="firebase.js"></script>



<script>
// ================================
// SECURITY CHECK
// ================================
if (!localStorage.getItem("zta_admin_login")) {
    window.location.href = "admin-login.html";
}



// ================================
// BAN/UNBAN FUNCTIONS (FIRESTORE)
// ================================
async function banUser(uid) {
    await ZTA.db.collection("users").doc(uid).update({
        banned: true
    });
    alert("User BANNED: " + uid);
    loadUsers();
}

async function unbanUser(uid) {
    await ZTA.db.collection("users").doc(uid).update({
        banned: false
    });
    alert("User UNBANNED: " + uid);
    loadUsers();
}



// ================================
// LOAD ALL USERS (FIRESTORE)
// ================================
async function loadUsers() {
    const userList = document.getElementById("userList");
    const searchTerm = document.getElementById("searchUser").value.toLowerCase();

    const snap = await ZTA.db.collection("users").get();

    userList.innerHTML = "";

    snap.forEach(doc => {
        const u = doc.data();
        const uid = doc.id;

        if (!u.email && !u.username) return;

        if (
            (u.username && u.username.toLowerCase().includes(searchTerm)) ||
            (u.email && u.email.toLowerCase().includes(searchTerm)) ||
            uid.toLowerCase().includes(searchTerm)
        ) {
            const banned = u.banned === true ? "YES" : "NO";
            const color = banned === "YES" ? "text-red-400" : "text-green-400";

            userList.innerHTML += `
                <div class="box p-4">
                    <p><span class="text-green-500">UID:</span> ${uid}</p>
                    <p><span class="text-green-500">Username:</span> ${u.username || "N/A"}</p>
                    <p><span class="text-green-500">Email:</span> ${u.email}</p>

                    <p><span class="text-green-500">Banned:</span> 
                       <span class="${color}">${banned}</span>
                    </p>

                    <div class="mt-3 flex gap-3">
                        <button onclick="banUser('${uid}')" class="btn">BAN</button>
                        <button onclick="unbanUser('${uid}')" class="btn">UNBAN</button>
                    </div>
                </div>
            `;
        }
    });
}



// SEARCH LIVE
document.getElementById("searchUser").addEventListener("input", loadUsers);


// INITIAL LOAD
loadUsers();
</script>


</body>
</html>
